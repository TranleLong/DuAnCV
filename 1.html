<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./Css/web.css">
    <link rel="stylesheet" href="./Css/mobile.css">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <title>B·ªëc T√∫i M√π</title>
</head>
<body>
    <h1>B·ªëc T√∫i M√π</h1>
    <div class="container">
        <div class="container-wrapper">
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
            <div class="pig" onclick="askQuestion(this)" onmouseenter="playRandomHoverSound(this)" onmouseleave="stopHoverSound(this)"><span class="amount"></span></div>
        </div>
    </div>
    
    <div id="questionModal" class="question-modal">
        <div class="modal-content">
            <h2>C√¢u h·ªèi</h2>
            <p id="questionText"></p>
            <div class="wrapper-qs">
                <button onclick="checkAnswer('A')" id="optionA"></button>
                <button onclick="checkAnswer('B')" id="optionB"></button>
                <button onclick="checkAnswer('C')" id="optionC"></button>
                <button onclick="checkAnswer('D')" id="optionD"></button>
            </div>
        </div>
    </div>

    <div id="moneyModal" class="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2>Ch√∫c m·ª´ng!</h2>
            <p>B·∫°n nh·∫≠n ƒë∆∞·ª£c: <span id="modalAmount"></span></p>
            <img id="moneyImage" class="money-image" src="" alt="T·ªù ti·ªÅn">
            <button class="close-btn" onclick="closeModal()">ƒê√≥ng</button>
        </div>
    </div>
    
    <audio id="successSound" src="./radio/money.m4a"></audio>
    <audio id="failSound" src="./radio/wronganswer.m4a"></audio>
    <audio id="backgroundMusic" src="./radio/HappyBirthday.mp3" loop autoplay></audio>
    <!-- <audio id="hoverSound" src="./radio/hover1.m4a"></audio> -->
    



    <script>

        
        document.addEventListener("DOMContentLoaded", function() {
            const pigContainer = document.getElementById("pigContainer");
            const backgroundMusic = document.getElementById("backgroundMusic");
            const hoverSound = document.getElementById("hoverSound");
            let isQuestionOpen = false;

            const numPigs = 10;
            const radius = 120;

            // T·ª± ƒë·ªông ph√°t nh·∫°c n·ªÅn khi t·∫£i trang
            setTimeout(() => {
                backgroundMusic.play().catch(() => console.log("T·ª± ƒë·ªông ph√°t nh·∫°c b·ªã ch·∫∑n!"));
            }, 1000);

            for (let i = 0; i < numPigs; i++) {
                let pig = document.createElement("div");
                pig.classList.add("pig");
                let angle = (i / numPigs) * (2 * Math.PI);
                let x = radius * Math.cos(angle);
                let y = radius * Math.sin(angle);
                pig.style.left = `${150 + x - 50}px`;
                pig.style.top = `${150 + y - 40}px`;

                // Khi hover v√†o heo
                pig.addEventListener("mouseenter", function() {
                    if (!isQuestionOpen) {
                        backgroundMusic.pause();
                        hoverSound.currentTime = 0;
                        hoverSound.play();
                    }
                });

                pig.addEventListener("mouseleave", function() {
                    if (!isQuestionOpen) {
                        hoverSound.pause();
                        hoverSound.currentTime = 0;
                        backgroundMusic.play();
                    }
                });

                // Khi click v√†o heo (ch·ªçn c√¢u h·ªèi)
                pig.addEventListener("click", function() {
                    isQuestionOpen = true;
                    backgroundMusic.pause();
                    hoverSound.play();
                    showQuestion();
                });

                pigContainer.appendChild(pig);
            }

            // Hi·ªÉn th·ªã c√¢u h·ªèi (gi·∫£ l·∫≠p)
            function showQuestion() {
                setTimeout(() => {
                    closeQuestion();
                }, 5000);
            }

            // ƒê√≥ng c√¢u h·ªèi, t·∫Øt nh·∫°c hover, b·∫≠t l·∫°i nh·∫°c n·ªÅn
            function closeQuestion() {
                isQuestionOpen = false;
                hoverSound.pause();
                hoverSound.currentTime = 0;
                backgroundMusic.play();
            }
        });

        
        let moneyValues = ["BABYTHREE", "C·ªôt t√≥c", "100,000 VND", "L·∫ßn sau", "20,000 VND", "50,000 VND", "10,000 VND", "5,000 VND", "1 mi·∫øng m·∫∑t n·∫°", "SOCOLA", "·ªêP L∆ØNG ƒêI·ªÜN THO·∫†I"];
        moneyValues = moneyValues.sort(() => Math.random() - 0.5);

        let currentPig = null;
        let usedQuestions = new Set(); // L∆∞u c√¢u h·ªèi ƒë√£ ƒë∆∞·ª£c tr·∫£ l·ªùi ƒë√∫ng

        let questions = [
            { question: "1.Ng√†y vk ck m√¨nh quen nhau l√† ng√†y m·∫•y v√† ·ªü ƒë√¢u?", options: ["A: ƒê√®o H·∫£i V√¢n,29/12/2024", "B: ƒê√®o C·∫£,29/01/2025", "C: ƒê√®o Ph∆∞·ªõc T∆∞·ª£ng,29/01/2024", "D: ƒê√† N·∫µng,13/2/2025"], correct: "A" },
            { question: "2.Vk th√≠ch ck ·ªü ƒëi·ªÉm g√¨?", options: ["A: ƒê·∫πp zaii", "B: Khoai toaa", "C: C·∫£ A v√† B ƒë·ªÅu ƒë√∫ng", "D: C·∫£ A v√† B ƒë·ªÅu sai"], correct: "C" },
            { question: "3.Ck th√≠ch en g√¨ nh·∫•t?", options: ["A: Vk", "B: Socola", "C: C∆°m g√†", "D: B√°nh n·∫≠m"], correct: "A" },
            { question: "4.Vk c√≥ t·∫≠t x·∫•u g√¨?", options: ["A: Ng·ªß N∆∞·ªõng", "B: ƒê·ªãt th√∫i ", "C: A v√† B ƒë·ªÅu ƒë√∫ng", "D: A v√† B ƒë·ªÅu sai"], correct: "C" },
            { question: "5.H√¥m nay Ck tr√¥ng th·∫ø n√†o trong m·∫Øt Vk?", options: ["A: ƒê·∫πp trai nh∆∞ m·ªçi ng√†y üòé", "B: ƒê·∫πp trai h∆°n m·ªçi ng√†y ü•∞", "C: ƒê·∫πp trai v√¥ ƒë·ªëi lu√¥n! üî•", "D: ƒê·∫πp trai ƒë·∫øn m·ª©c em mu·ªën c∆∞·ªõi ngay üòò"], correct: "C" },
            { question: "6.N·∫øu Vk gi·∫≠n, Ck l√†m g√¨ cho vk h·∫øt gi·∫≠n?", options: ["A: Th∆°m vk c√°i", "B: Ting ting m√≥ n√¨", "C: G·ª≠i tin nh·∫Øn xin l·ªói + 1000 icon ƒë√°ng y√™u üò≠", "D: L·∫•y con c·ªù him ƒë·ªÉ vk b√≠uuuu"], correct: "A" },
            { question: "7.L·∫ßn ƒë·∫ßu ti√™n ch√∫ng ta g·∫∑p nhau, Vk ƒë√£ nghƒ© g√¨ v·ªÅ Ck?", options: ["A: Th√®n boe ƒëoee", "B: So√°i Ca", "C: Nh√¨n gh√©t gh√©t", "D: ƒê·ªãnh m·ªánh c·ªßa ƒë·ªùi m√¨nh"], correct: "A" },
            { question: "8.N·∫øu Ck l√† m·ªôt m√≥n ƒÉn, Vk nghƒ© Ck s·∫Ω l√† m√≥n g√¨?", options: ["A: C∆°m ‚Äì v√¨ kh√¥ng th·ªÉ thi·∫øu m·ªói ng√†y! üçö", "B: Tr√† s·ªØa ‚Äì v√¨ u·ªëng ho√†i kh√¥ng ch√°n! üßã", "C: ·ªöt ‚Äì v√¨ l√∫c n√†o c≈©ng l√†m em cay cay gi·∫≠n d·ªói! üå∂Ô∏è", "D: K·∫πo ‚Äì v√¨ anh qu√° ng·ªçt ng√†o v·ªõi em! üç¨"], correct: "D" },
            { question: "9.Ck c√≥ ƒëi·ªÉm g√¨ m√† vk th√≠ch nh·∫•t?", options: ["A: ƒê·∫πp trai v√† phong ƒë·ªô! üòé", "B: Bi·∫øt quan t√¢m v√† chi·ªÅu em! üíï", "C: H√†i h∆∞·ªõc, l√∫c n√†o c≈©ng l√†m em c∆∞·ªùi! üòÜ", "D: T·∫•t c·∫£ nh·ªØng ƒëi·ªÅu tr√™n! ü•∞"], correct: "C" },
            { question: "10.L·∫ßn ƒë·∫ßu ti√™n Ck t·ªè t√¨nh, Vk ƒë√£ n√≥i g√¨?", options: ["A: ‚ÄúCk n√≥i th·∫≠t hay gi·ª°n ƒë√≥?‚Äù ü§®", "B: ‚ÄúEm ph·∫£i suy nghƒ© ƒë√£!‚Äù üòÜ", "C: ‚ÄúAnh c√≥ ch·∫Øc kh√¥ng ƒë√≥?‚Äù üôÉ", "D: Kh√¥nggggggggggggggg"], correct: "D" }
        ];

        function askQuestion(element) {
            if (element.dataset.clicked) return;
            currentPig = element;

            let availableQuestions = questions.filter(q => !usedQuestions.has(q.question));
            if (availableQuestions.length === 0) return; // N·∫øu h·∫øt c√¢u h·ªèi th√¨ kh√¥ng hi·ªÉn th·ªã g√¨ c·∫£
            
            let randomIndex = Math.floor(Math.random() * availableQuestions.length);
            let selectedQuestion = availableQuestions[randomIndex];
            
            document.getElementById("questionText").textContent = selectedQuestion.question;
            document.getElementById("optionA").textContent = selectedQuestion.options[0];
            document.getElementById("optionB").textContent = selectedQuestion.options[1];
            document.getElementById("optionC").textContent = selectedQuestion.options[2];
            document.getElementById("optionD").textContent = selectedQuestion.options[3];
            document.getElementById("questionModal").dataset.correct = selectedQuestion.correct;
            document.getElementById("questionModal").dataset.question = selectedQuestion.question;
            document.getElementById("questionModal").style.display = "flex";
        }


        

        function checkAnswer(answer) {
            hoverAudio.play();
            document.getElementById("questionModal").style.display = "none";
            let correctAnswer = document.getElementById("questionModal").dataset.correct;
        
            if (answer === correctAnswer) {
                document.getElementById("questionModal").style.display = "none";
                stopHoverSound();
                document.getElementById("successSound").play();
                showAmount(currentPig);
            } 
            else {
                document.getElementById("questionModal").style.display = "none";
                stopHoverSound();
                document.getElementById("failSound").play();
                showPenalty();
            }
            backgroundMusic.play();
        }
        
        // Danh s√°ch h√¨nh ph·∫°t
        let penalties = [
            "Nh·∫£y l√≤ c√≤ 5 v√≤ng",
            "H√°t m·ªôt b√†i h√°t ng·∫´u nhi√™n",
            "Th∆°m ck 1 c√°i",
            "K·ªÉ m·ªôt c√¢u chuy·ªán c∆∞·ªùi",
            "Nh·∫£y m√∫a trong 30 gi√¢y",
            "N√≥i m·ªôt c√¢u b·∫±ng gi·ªçng ƒë·ªông v·∫≠t",
            "B·∫°n may m·∫Øn kh√¥ng c√≥ h√¨nh ph·∫°t",
            "N√≥i m·ªôt c√¢u ti·∫øng Anh v·ªÅ b·∫£n th√¢n",
            "Gi·∫£ gi·ªçng nh√¢n v·∫≠t ho·∫°t h√¨nh",
            "Ck b·∫£o g√¨ c≈©ng ƒë·ªìng √Ω trong 24h"
        ];
        
        // Hi·ªÉn th·ªã c·ª≠a s·ªï h√¨nh ph·∫°t
        function showPenalty() {
            backgroundMusic.pause();
            hoverAudio.pause();
            let randomPenalty = penalties[Math.floor(Math.random() * penalties.length)];
            let penaltyModal = document.createElement("div");
            penaltyModal.classList.add("modal");
            penaltyModal.innerHTML = `
                <div class="modal-content">
                    <h2>H√¨nh ph·∫°t!</h2>
                    <p>${randomPenalty}</p>
                    <button class="close-btn" onclick="closePenaltyModal()">OK</button>
                </div>
            `;
            penaltyModal.style.display = "flex";
            document.body.appendChild(penaltyModal);
        }
        
        // ƒê√≥ng c·ª≠a s·ªï h√¨nh ph·∫°t
        function closePenaltyModal() {
            document.querySelector(".modal").remove();
        }
        
        
        function showAmount(element) {
            backgroundMusic.pause();
            hoverAudio.pause();
            element.dataset.clicked = true;
            let amountDiv = element.querySelector('.amount');
            let index = [...document.querySelectorAll('.pig')].indexOf(element);
            let randomAmount = moneyValues[index];
            
            amountDiv.textContent = randomAmount;
            amountDiv.style.display = 'block';
            
            let modal = document.getElementById('moneyModal');
            let modalAmount = document.getElementById('modalAmount');
            let moneyImage = document.getElementById('moneyImage');
            
            modalAmount.textContent = randomAmount;
            moneyImage.src = `./img/${randomAmount.replace(/,/g, '').replace(' VND', '')}.png`;
            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('moneyModal').style.display = 'none';
        }



        // Danh s√°ch c√°c √¢m thanh khi hover
        let hoverSounds = ["./radio/hover1.m4a"];
        let hoverAudio = new Audio();
        let backgroundMusic = document.getElementById("backgroundMusic");
        let isHovering = false;
        let isMusicPausedByHover = false; // Bi·∫øn ƒë·ªÉ theo d√µi tr·∫°ng th√°i c·ªßa nh·∫°c n·ªÅn

        function playRandomHoverSound(pig) {
            if (!isHovering) {
                let randomSound = hoverSounds[Math.floor(Math.random() * hoverSounds.length)];
                hoverAudio.src = randomSound;
                hoverAudio.loop = true;
                backgroundMusic.play();
                isHovering = true;

                // T·∫Øt nh·∫°c n·ªÅn khi hover v√†o con heo
                if (!backgroundMusic.paused) {
                    backgroundMusic.play();
                    isMusicPausedByHover = true;
                }
            }
        }

        function stopHoverSound() {
            backgroundMusic.play();
            hoverAudio.currentTime = 0;
            isHovering = false;

            // Ch·ªâ ph√°t l·∫°i nh·∫°c n·ªÅn n·∫øu n√≥ b·ªã t·∫Øt b·ªüi hover
            if (isMusicPausedByHover) {
                backgroundMusic.play();
                isMusicPausedByHover = false;
            }
        }

        
    </script>
</body>
</html>

